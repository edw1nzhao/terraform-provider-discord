---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "discord_auto_moderation_rule Resource - discord"
subcategory: ""
description: |-
  Manages a Discord auto-moderation rule.
---

# discord_auto_moderation_rule (Resource)

Manages a Discord auto-moderation rule.

## Example Usage

```terraform
# SPDX-License-Identifier: MPL-2.0

locals {
  guild_id = "123456789012345678" # Replace with your guild ID
}

# Manage a keyword-based auto-moderation rule
resource "discord_auto_moderation_rule" "no_bad_words" {
  guild_id = local.guild_id
  name     = "Block Bad Words"

  # Event type: 1=MESSAGE_SEND, 2=MEMBER_UPDATE
  event_type = 1

  # Trigger type: 1=KEYWORD, 3=SPAM, 4=KEYWORD_PRESET, 5=MENTION_SPAM, 6=MEMBER_PROFILE
  trigger_type = 1

  trigger_metadata = {
    keyword_filter = ["badword1", "badword2"]
    regex_patterns = ["b[a@]dw[o0]rd"]
  }

  # Actions to take when the rule is triggered
  actions = [
    {
      # Block the message (type 1)
      type = 1
      metadata = {
        custom_message = "Your message was blocked by AutoMod."
      }
    },
    {
      # Send alert to a channel (type 2)
      type = 2
      metadata = {
        channel_id = "123456789012345678" # Replace with your alert channel ID
      }
    },
  ]

  enabled = true

  # Exempt specific roles and channels from this rule
  exempt_roles    = ["123456789012345678"] # Replace with your exempt role IDs
  exempt_channels = ["123456789012345678"] # Replace with your exempt channel IDs
}

# Auto-moderation rule using keyword presets
resource "discord_auto_moderation_rule" "preset_filter" {
  guild_id     = local.guild_id
  name         = "Preset Content Filter"
  event_type   = 1
  trigger_type = 4 # KEYWORD_PRESET

  trigger_metadata = {
    # Presets: 1=Profanity, 2=Sexual Content, 3=Slurs
    presets    = [1, 2, 3]
    allow_list = ["acceptable_word"]
  }

  actions = [
    {
      type = 1 # BLOCK_MESSAGE
    },
  ]

  enabled = true
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `actions` (Attributes List) The actions to take when the rule is triggered. (see [below for nested schema](#nestedatt--actions))
- `event_type` (Number) The event type that triggers the rule (1 = MESSAGE_SEND, 2 = MEMBER_UPDATE).
- `guild_id` (String) The ID of the guild.
- `name` (String) The name of the auto-moderation rule.
- `trigger_type` (Number) The trigger type (1 = KEYWORD, 3 = SPAM, 4 = KEYWORD_PRESET, 5 = MENTION_SPAM, 6 = MEMBER_PROFILE).

### Optional

- `enabled` (Boolean) Whether the rule is enabled.
- `exempt_channels` (Set of String) Channel IDs that are exempt from the rule (max 50).
- `exempt_roles` (Set of String) Role IDs that are exempt from the rule (max 20).
- `trigger_metadata` (Attributes) Additional metadata for the trigger. (see [below for nested schema](#nestedatt--trigger_metadata))

### Read-Only

- `id` (String) The ID of the auto-moderation rule.

<a id="nestedatt--actions"></a>
### Nested Schema for `actions`

Required:

- `type` (Number) The type of action (1 = BLOCK_MESSAGE, 2 = SEND_ALERT_MESSAGE, 3 = TIMEOUT, 4 = BLOCK_MEMBER_INTERACTION).

Optional:

- `metadata` (Attributes) Additional metadata for the action. (see [below for nested schema](#nestedatt--actions--metadata))

<a id="nestedatt--actions--metadata"></a>
### Nested Schema for `actions.metadata`

Optional:

- `channel_id` (String) Channel to which user content should be logged.
- `custom_message` (String) Additional explanation shown to members when their message is blocked.
- `duration_seconds` (Number) Timeout duration in seconds.



<a id="nestedatt--trigger_metadata"></a>
### Nested Schema for `trigger_metadata`

Optional:

- `allow_list` (List of String) Substrings which should not trigger the rule.
- `keyword_filter` (List of String) Substrings which will be searched for in content.
- `mention_raid_protection_enabled` (Boolean) Whether to automatically detect mention raids.
- `mention_total_limit` (Number) Total number of unique role and user mentions allowed per message.
- `presets` (List of Number) Preset keyword lists (1 = Profanity, 2 = Sexual Content, 3 = Slurs).
- `regex_patterns` (List of String) Regular expression patterns which will be matched against content.
